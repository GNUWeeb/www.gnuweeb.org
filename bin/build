#!/bin/bash
#!/bin/sh

set -e

# Help function
# Display script functionality.
Help() {
  echo "Build the site."
  echo
  echo "Syntax: build [-d|p]"
  echo "Options:"
  echo "-d    Build for development mode only. It's adviced to use 'serve' script if you want to live reload the site."
  echo "-p    Build for production ready site."
}

# Development Build funtion
DevBuild() {
  echo "Building development mode site..."
  # The default is development mode, just reassuring.
  JEKYLL_ENV=development bundle exec jekyll build --config _config.yml
  echo "Done."
}

# Production Build function
ProBuild() {
  echo "Building deployment ready site..."
  JEKYLL_ENV=production bundle exec jekyll build --config.yml
  echo "Done. Now copy the contens of _site to your server."
}

# Handling Options
while getopts dp: options; do
  case $options in
    d) # Invoke DevBuild
      DevBuild
      exit;;
    p) # Invoke ProBuild
      ProBuild
      exit;;
    \?) # Invalid option
      echo "owO: You've entered invalid option."
      exit;;
  esac
done

# Invoke Help
Help
